language: node_js

node_js:
  - "4.0"

env:
  global:
    - secure: RxFIwZUbf+Kec/kF37Iu8YaekLQDCjDP2YTCbqLi4mNHsbc4WRohUGXXYgCS6wSV8vEW3ditOFhTx/rchMJdJRonL1fNI6hSVLbFU39RGB/vhJXTGE8oU9dV0bK1a3vPmSoyWIhbODhS751nAlgMgd0U6QNxhRE/3SLuiD3pTGbV5XY13iJGzNIijCrrIu0FfgfNwkf5ezJBW+lzd/Cr5PJyu+mwRv3L5WPmhDslr6KGh4gkxnu+o1pa0x/S+M7YIQ+uy+5Y5N4pSS3TboVfsufrkCGI8CPr5WZjnKbejeN88kIUxSxEu0+xOo1vNX29uwh98HGpGcbmwSQgbUtFow==
  
before_script:
  - ./testspace_install.sh
  - export PATH="${HOME}/testspace:${PATH}"
  - mkdir -p shippable/codecoverage
  - mkdir -p shippable/testresults
script:
  - testspace import .testspace.xml ${TESTSPACE_URL}
  - testspace run ${TESTSPACE_URL}

after_script:
  - cp test/reports/junitresults.xml shippable/testresults
  - cp test/reports/coverage/clover.xml shippable/codecoverage